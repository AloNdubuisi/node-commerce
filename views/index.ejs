<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Store - Products</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <nav class="navbar">
    <div class="container">
        <a href="/"><h1 class="logo">Simple Store</h1></a>

        <button class="hamburger" aria-label="Toggle navigation">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>

        <div class="nav-links">
            <a href="/">Products</a>
            <a href="/cart" class="cart-link">
                Cart (<span id="cart-count">0</span>)
            </a>
            <!-- <a href="/admin">Admin</a> -->
        </div>
    </div>
</nav>



    <div class="container">
        <h2>NEW ARRIVALS OF PRODUCTS</h2>
        <div id="products-grid" class="products-grid">
            <% if (products.length === 0) { %>
                <p>No products available. <a href="/admin">Add products from admin panel</a></p>
            <% } else { %>
                <% products.forEach(product => { %>
                    <div class="product-card">
                        <img src="<%= product.image || 'https://via.placeholder.com/200' %>" alt="<%= product.name %>">
                        <h3><%= product.name %></h3>
                        <p class="description"><%= product.description %></p>
                        <p class="price">$<%= product.price.toFixed(2) %></p>
                        <button onclick="addToCart('<%= product._id %>', '<%= product.name %>', <%= product.price %>, '<%= product.image %>')" class="btn">Add to Cart</button>
                    </div>
                <% }) %>
            <% } %>
        </div>
    </div>

    <script src="/js/cart.js"></script>
    <script src="/js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            updateCartCount();
        });

        function addToCart(id, name, price, image) {
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const existingItem = cart.find(item => item.id === id);

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ id, name, price, image, quantity: 1 });
            }

            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            alert('Product added to cart!');
        }
    </script>
</body>
</html>